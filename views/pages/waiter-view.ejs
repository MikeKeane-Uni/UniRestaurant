<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include('../partials/head') %>

        <link rel="stylesheet" type="text/css" href="/css/waiter-view.css" />


    </head>
    <body>
        <div class="jumbotron jumbotron-fluid">
            <div class="container">
                <h1>Restaurant</h1>
                <p>Waiter View</p>
            </div>
        </div>

        <div class="container" id="waiterApp">
            <div id="itemDetails">
                <div class="row">
                    <div class="col-md-6">
                        <input type="number" class="form-control" id="tableNumber" placeholder="Table Number">
                    </div>
                    <div class="col-md-6">
                        <input type="number" class="form-control" id="itemId" placeholder="Item ID">
                    </div>
                </div>
                <button id="addToOrder" type="submit" class="btn btn-primary">Submit</button> <!--When submitted, info is supposed to go to card below-->
            </div>
            <div class="card"><!--table number and order displayed in card-->
                <div class="card-body">
                    <h2>Order Summary</h2>
                    <ul class="card-content" id="orderItems">
                        <!-- items will be added here -->
                    </ul>
                    <button id="submitOrder" class="btn btn-primary">Submit Order</button>
                    <button id="clearOrder" class="btn btn-danger">Clear Order</button>
                </div>
            </div>
        </div>

        <script type="text/template" id="orderItemTemplate">
            <span class="item-qty">{{ qty }}no</span>
            <span class="item-description">{{ name }}</span>
        </script>


        <!-- load bootstrap js -->
        <%- include('../partials/bootstrapjs') %>
        <!-- load underscore.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
        <!-- load backbone.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
        <!-- load socket.io -->
        <script src="/socket.io/socket.io.js"></script>
        <!-- load custom page js -->
        <script src="/js/waiter-view.js"></script>

        <button onclick="testOrder()">Test</button>

        <script>
            function testOrder() {
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "http://localhost:8080/create-new-order", true);
                xhr.setRequestHeader("Content-type", "application/json");
                xhr.send(JSON.stringify({
                    items: [
                        {
                            quantity: 2,
                            item_id: "1.1",

                        },
                        {
                            item_id: "1.2"
                        }
                    ]
                }));

                xhr.onreadystatechange = function() {
                    if(xhr.readyState === 4 && xhr.status === 200) {
                        console.log("done");
                    }
                }
            }
        </script>
    </body>
</html>
